import random

choices = ["rock", "paper", "scissors"]
win_map = {"rock": "scissors", "scissors": "paper", "paper": "rock"}

def get_user_choice():
    try:
        user = input("Enter rock, paper, or scissors: ").strip().lower()
        if user not in choices:
            raise ValueError("Invalid choice! Please try again.")
        return user
    except ValueError as e:
        print(e)
        return get_user_choice()  # Ask again if invalid

def get_computer_choice():
    return random.choice(choices)

def decide_winner(user, computer):
    if user == computer:
        return "draw"
    elif win_map[user] == computer:
        return "user"
    else:
        return "computer"


def play():
    print("\n--- Rock Paper Scissors ---")
    rounds = 0
    user_score = 0
    computer_score = 0

    while True:
        rounds += 1
        print(f"\nRound {rounds}")

        user = get_user_choice()
        comp = get_computer_choice()

        print(f"You chose: {user}")
        print(f"Computer chose: {comp}")

        winner = decide_winner(user, comp)
        if winner == "draw":
            print("It's a draw!")
        elif winner == "user":
            print("You win this round!")
            user_score += 1
        else:
            print("Computer wins this round!")
            computer_score += 1

        print(f"Score → You: {user_score} | Computer: {computer_score}")

        play_again = input("\nPlay again? (yes/no): ").strip().lower()
        if play_again != "yes":
            print("\nGame Over!")
            break

    print(f"Final Score → You: {user_score} | Computer: {computer_score}")
    if user_score > computer_score:
        print(" You win the match!")
    elif user_score < computer_score:
        print(" Computer wins the match!")
    else:
        print("It's a Tie!")

if __name__ == "__main__":
    play()
